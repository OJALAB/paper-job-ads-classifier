"0","hierachy[, .(digits2=uniqueN(substr(class[str_detect(class, ""\\d{2}"")], 1,2)),"
"0","             digits3=uniqueN(substr(class[str_detect(class, ""\\d{3}"")], 1,3)),"
"0","             digits4=uniqueN(substr(class[str_detect(class, ""\\d{4}"")], 1,4)),"
"0","             digits6=uniqueN(substr(class[str_detect(class, ""\\d{6}"")], 1,6)),"
"0","             digits6_no=uniqueN(substr(class[str_detect(class, ""\\d{6}"") & !str_detect(class, ""90$"")], 1,6)))"
"0","         , keyby=.(digit1=substr(class, 1, 1))] |>"
"0","  transform(digit1=factor(digit1, 0:9,"
"0","                          c(""0 Armed forces"", ""1 Public authorities, senior officials and managers"", ""2 Professionals"", "
"0","                            ""3 Technicians and associate professionals"", ""4 Clerical support workers"", ""5 Service and sales workers"", "
"0","                            ""6 Farmers, gardeners, foresters and fishermen"", ""7 Craft and related trades workers"", "
"0","                            ""8 Plant and machine operators and assemblers"", ""9 Blue collar workers""))) -> hierarchy_details"
"0",""
"0","rbind("
"0","  hierarchy_details,"
"0","  hierarchy_details[, lapply(.SD, sum), .SDcols = digits2:digits6_no][, digit1:=""All""]"
"0",") |>"
"0","  xtable() |>"
"0","  print.xtable(include.rownames = F)"
"1","% latex table generated in R 4.3.2 by xtable 1.8-4 package
% Mon Jul 22 13:36:16 2024
\begin{table}[ht]
\centering
\begin{tabular}{lrrrrr}
  \hline
digit1 & digits2 & digits3 & digits4 & digits6 & digits6\_no \\ 
  \hline
0 Armed forces &   3 &   3 &   3 &   3 &   3 \\ 
  1 Public authorities, senior officials and managers &   4 &  11 &  31 & 202 & 172 \\ 
  2 Professionals &   6 &  31 &  99 & 789 & 705 \\ 
  3 Technicians and associate professionals &   5 &  20 &  87 & 610 & 535 \\ 
  4 Clerical support workers &   4 &   8 &  27 &  89 &  71 \\ 
  5 Service and sales workers &   4 &  13 &  39 & 166 & 137 \\ 
  6 Farmers, gardeners, foresters and fishermen &   3 &   9 &  17 &  63 &  54 \\ 
  7 Craft and related trades workers &   5 &  14 &  69 & 476 & 412 \\ 
  8 Plant and machine operators and assemblers &   3 &  14 &  41 & 387 & 349 \\ 
  9 Blue collar workers &   6 &  11 &  32 & 126 & 111 \\ 
  All &  43 & 134 & 445 & 2911 & 2549 \\ 
   \hline
\end{tabular}
\end{table}
"
